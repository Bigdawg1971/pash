
(function(){var s=this;var q=s._;var b={};var i=Array.prototype,A=Object.prototype;var r=i.slice,v=i.unshift,u=A.toString,n=A.hasOwnProperty;var l=i.forEach,h=i.map,y=i.reduce,e=i.reduceRight,k=i.filter,a=i.every,x=i.some,t=i.indexOf,f=i.lastIndexOf,c=Array.isArray,z=Object.keys;var B=function(C){return new g(C);};if(typeof module!=="undefined"&&module.exports){module.exports=B;B._=B;}else{s._=B;}B.VERSION="1.1.4";var d=B.each=B.forEach=function(I,G,F){var H;if(I==null){return;}if(l&&I.forEach===l){I.forEach(G,F);}else{if(B.isNumber(I.length)){for(var E=0,C=I.length;E<C;E++){if(G.call(F,I[E],E,I)===b){return;}}}else{for(var D in I){if(n.call(I,D)){if(G.call(F,I[D],D,I)===b){return;}}}}}};B.map=function(F,E,D){var C=[];if(F==null){return C;}if(h&&F.map===h){return F.map(E,D);}d(F,function(I,G,H){C[C.length]=E.call(D,I,G,H);});return C;};B.reduce=B.foldl=B.inject=function(G,F,C,E){var D=C!==void 0;if(G==null){G=[];}if(y&&G.reduce===y){if(E){F=B.bind(F,E);}return D?G.reduce(F,C):G.reduce(F);}d(G,function(J,H,I){if(!D&&H===0){C=J;D=true;}else{C=F.call(E,C,J,H,I);}});if(!D){throw new TypeError("Reduce of empty array with no initial value");}return C;};B.reduceRight=B.foldr=function(F,E,C,D){if(F==null){F=[];}if(e&&F.reduceRight===e){if(D){E=B.bind(E,D);}return C!==void 0?F.reduceRight(E,C):F.reduceRight(E);}var G=(B.isArray(F)?F.slice():B.toArray(F)).reverse();return B.reduce(G,E,C,D);};B.find=B.detect=function(F,E,D){var C;o(F,function(I,G,H){if(E.call(D,I,G,H)){C=I;return true;}});return C;};B.filter=B.select=function(F,E,D){var C=[];if(F==null){return C;}if(k&&F.filter===k){return F.filter(E,D);}d(F,function(I,G,H){if(E.call(D,I,G,H)){C[C.length]=I;}});return C;};B.reject=function(F,E,D){var C=[];if(F==null){return C;}d(F,function(I,G,H){if(!E.call(D,I,G,H)){C[C.length]=I;}});return C;};B.every=B.all=function(F,E,D){E=E||B.identity;var C=true;if(F==null){return C;}if(a&&F.every===a){return F.every(E,D);}d(F,function(I,G,H){if(!(C=C&&E.call(D,I,G,H))){return b;}});return C;};var o=B.some=B.any=function(F,E,D){E=E||B.identity;var C=false;if(F==null){return C;}if(x&&F.some===x){return F.some(E,D);}d(F,function(I,G,H){if(C=E.call(D,I,G,H)){return b;}});return C;};B.include=B.contains=function(E,D){var C=false;if(E==null){return C;}if(t&&E.indexOf===t){return E.indexOf(D)!=-1;}o(E,function(F){if(C=F===D){return true;}});return C;};B.invoke=function(D,E){var C=r.call(arguments,2);return B.map(D,function(F){return(E?F[E]:F).apply(F,C);});};B.pluck=function(D,C){return B.map(D,function(E){return E[C];});};B.max=function(F,E,D){if(!E&&B.isArray(F)){return Math.max.apply(Math,F);}var C={computed:-Infinity};d(F,function(J,G,I){var H=E?E.call(D,J,G,I):J;H>=C.computed&&(C={value:J,computed:H});});return C.value;};B.min=function(F,E,D){if(!E&&B.isArray(F)){return Math.min.apply(Math,F);}var C={computed:Infinity};d(F,function(J,G,I){var H=E?E.call(D,J,G,I):J;H<C.computed&&(C={value:J,computed:H});});return C.value;};B.sortBy=function(E,D,C){return B.pluck(B.map(E,function(H,F,G){return{value:H,criteria:D.call(C,H,F,G)};}).sort(function(I,H){var G=I.criteria,F=H.criteria;return G<F?-1:G>F?1:0;}),"value");};B.sortedIndex=function(H,G,E){E=E||B.identity;var C=0,F=H.length;while(C<F){var D=(C+F)>>1;E(H[D])<E(G)?C=D+1:F=D;}return C;};B.toArray=function(C){if(!C){return[];}if(C.toArray){return C.toArray();}if(B.isArray(C)){return C;}if(B.isArguments(C)){return r.call(C);}return B.values(C);};B.size=function(C){return B.toArray(C).length;};B.first=B.head=function(E,D,C){return D&&!C?r.call(E,0,D):E[0];};B.rest=B.tail=function(E,C,D){return r.call(E,B.isUndefined(C)||D?1:C);};B.last=function(C){return C[C.length-1];};B.compact=function(C){return B.filter(C,function(D){return !!D;});};B.flatten=function(C){return B.reduce(C,function(D,E){if(B.isArray(E)){return D.concat(B.flatten(E));}D[D.length]=E;return D;},[]);};B.without=function(D){var C=r.call(arguments,1);return B.filter(D,function(E){return !B.include(C,E);});};B.uniq=B.unique=function(D,C){return B.reduce(D,function(E,G,F){if(0==F||(C===true?B.last(E)!=G:!B.include(E,G))){E[E.length]=G;}return E;},[]);};B.intersect=function(D){var C=r.call(arguments,1);return B.filter(B.uniq(D),function(E){return B.every(C,function(F){return B.indexOf(F,E)>=0;});});};B.zip=function(){var C=r.call(arguments);var F=B.max(B.pluck(C,"length"));var E=new Array(F);for(var D=0;D<F;D++){E[D]=B.pluck(C,""+D);}return E;};B.indexOf=function(G,E,F){if(G==null){return -1;}if(F){var D=B.sortedIndex(G,E);return G[D]===E?D:-1;}if(t&&G.indexOf===t){return G.indexOf(E);}for(var D=0,C=G.length;D<C;D++){if(G[D]===E){return D;}}return -1;};B.lastIndexOf=function(E,D){if(E==null){return -1;}if(f&&E.lastIndexOf===f){return E.lastIndexOf(D);}var C=E.length;while(C--){if(E[C]===D){return C;}}return -1;};B.range=function(J,G,H){var F=r.call(arguments),I=F.length<=1,J=I?0:F[0],G=I?F[0]:F[1],H=F[2]||1,D=Math.max(Math.ceil((G-J)/H),0),C=0,E=new Array(D);while(C<D){E[C++]=J;J+=H;}return E;};B.bind=function(D,E){var C=r.call(arguments,2);
return function(){return D.apply(E||{},C.concat(r.call(arguments)));};};B.bindAll=function(D){var C=r.call(arguments,1);if(C.length==0){C=B.functions(D);}d(C,function(E){D[E]=B.bind(D[E],D);});return D;};B.memoize=function(E,D){var C={};D=D||B.identity;return function(){var F=D.apply(this,arguments);return F in C?C[F]:(C[F]=E.apply(this,arguments));};};B.delay=function(D,E){var C=r.call(arguments,2);return setTimeout(function(){return D.apply(D,C);},E);};B.defer=function(C){return B.delay.apply(B,[C,1].concat(r.call(arguments,1)));};var w=function(D,F,C){var E;return function(){var H=this,G=arguments;var I=function(){E=null;D.apply(H,G);};if(C){clearTimeout(E);}if(C||!E){E=setTimeout(I,F);}};};B.throttle=function(C,D){return w(C,D,false);};B.debounce=function(C,D){return w(C,D,true);};B.wrap=function(C,D){return function(){var E=[C].concat(r.call(arguments));return D.apply(this,E);};};B.compose=function(){var C=r.call(arguments);return function(){var D=r.call(arguments);for(var E=C.length-1;E>=0;E--){D=[C[E].apply(this,D)];}return D[0];};};B.keys=z||function(E){if(B.isArray(E)){return B.range(0,E.length);}var D=[];for(var C in E){if(n.call(E,C)){D[D.length]=C;}}return D;};B.values=function(C){return B.map(C,B.identity);};B.functions=B.methods=function(C){return B.filter(B.keys(C),function(D){return B.isFunction(C[D]);}).sort();};B.extend=function(C){d(r.call(arguments,1),function(D){for(var E in D){C[E]=D[E];}});return C;};B.clone=function(C){return B.isArray(C)?C.slice():B.extend({},C);};B.tap=function(D,C){C(D);return D;};B.isEqual=function(D,C){if(D===C){return true;}var G=typeof(D),I=typeof(C);if(G!=I){return false;}if(D==C){return true;}if((!D&&C)||(D&&!C)){return false;}if(D._chain){D=D._wrapped;}if(C._chain){C=C._wrapped;}if(D.isEqual){return D.isEqual(C);}if(B.isDate(D)&&B.isDate(C)){return D.getTime()===C.getTime();}if(B.isNaN(D)&&B.isNaN(C)){return false;}if(B.isRegExp(D)&&B.isRegExp(C)){return D.source===C.source&&D.global===C.global&&D.ignoreCase===C.ignoreCase&&D.multiline===C.multiline;}if(G!=="object"){return false;}if(D.length&&(D.length!==C.length)){return false;}var E=B.keys(D),H=B.keys(C);if(E.length!=H.length){return false;}for(var F in D){if(!(F in C)||!B.isEqual(D[F],C[F])){return false;}}return true;};B.isEmpty=function(D){if(B.isArray(D)||B.isString(D)){return D.length===0;}for(var C in D){if(n.call(D,C)){return false;}}return true;};B.isElement=function(C){return !!(C&&C.nodeType==1);};B.isArray=c||function(C){return u.call(C)==="[object Array]";};B.isArguments=function(C){return !!(C&&n.call(C,"callee"));};B.isFunction=function(C){return !!(C&&C.constructor&&C.call&&C.apply);};B.isString=function(C){return !!(C===""||(C&&C.charCodeAt&&C.substr));};B.isNumber=function(C){return !!(C===0||(C&&C.toExponential&&C.toFixed));};B.isNaN=function(C){return C!==C;};B.isBoolean=function(C){return C===true||C===false;};B.isDate=function(C){return !!(C&&C.getTimezoneOffset&&C.setUTCFullYear);};B.isRegExp=function(C){return !!(C&&C.test&&C.exec&&(C.ignoreCase||C.ignoreCase===false));};B.isNull=function(C){return C===null;};B.isUndefined=function(C){return C===void 0;};B.noConflict=function(){s._=q;return this;};B.identity=function(C){return C;};B.times=function(F,E,D){for(var C=0;C<F;C++){E.call(D,C);}};B.mixin=function(C){d(B.functions(C),function(D){p(D,B[D]=C[D]);});};var j=0;B.uniqueId=function(C){var D=j++;return C?C+D:D;};B.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g};B.template=function(F,E){var G=B.templateSettings;var C="var __p=[],print=function(){__p.push.apply(__p,arguments);};"+"with(obj||{}){__p.push('"+F.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(G.interpolate,function(H,I){return"',"+I.replace(/\\'/g,"'")+",'";}).replace(G.evaluate||null,function(H,I){return"');"+I.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('";}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');";var D=new Function("obj",C);return E?D(E):D;};var g=function(C){this._wrapped=C;};B.prototype=g.prototype;var m=function(D,C){return C?B(D).chain():D;};var p=function(C,D){g.prototype[C]=function(){var E=r.call(arguments);v.call(E,this._wrapped);return m(D.apply(B,E),this._chain);};};B.mixin(B);d(["pop","push","reverse","shift","sort","splice","unshift"],function(C){var D=i[C];g.prototype[C]=function(){D.apply(this._wrapped,arguments);return m(this._wrapped,this._chain);};});d(["concat","join","slice"],function(C){var D=i[C];g.prototype[C]=function(){return m(D.apply(this._wrapped,arguments),this._chain);};});g.prototype.chain=function(){this._chain=true;return this;};g.prototype.value=function(){return this._wrapped;};})();
/*!!
 * JS Signals <http://millermedeiros.github.com/js-signals/>
 * Released under the MIT license <http://www.opensource.org/licenses/mit-license.php>
 * @author Miller Medeiros <http://millermedeiros.com/>
 * @version 0.5.1
 * @build 126 (01/30/2011 01:55 AM)
 */
var signals=(function(){function a(f,e,c,d){this._listener=e;
this._isOnce=c;this.context=d;this._signal=f;}a.prototype={_isEnabled:true,execute:function(c){var d;if(this._isEnabled){d=this._listener.apply(this.context,c);if(this._isOnce){this.detach();}}return d;},detach:function(){return this._signal.remove(this._listener);},getListener:function(){return this._listener;},dispose:function(){this.detach();this._destroy();},_destroy:function(){delete this._signal;delete this._isOnce;delete this._listener;delete this.context;},disable:function(){this._isEnabled=false;},enable:function(){this._isEnabled=true;},isEnabled:function(){return this._isEnabled;},isOnce:function(){return this._isOnce;},toString:function(){return"[SignalBinding isOnce: "+this._isOnce+", isEnabled: "+this._isEnabled+"]";}};function b(){this._bindings=[];}b.prototype={_shouldPropagate:true,_isEnabled:true,_registerListener:function(f,e,d){if(typeof f!=="function"){throw new Error("listener is a required param of add() and addOnce().");}var c=this._indexOfListener(f),g;if(c!==-1){g=this._bindings[c];if(g.isOnce()!==e){throw new Error("You cannot add"+(e?"":"Once")+"() then add"+(!e?"":"Once")+"() the same listener without removing the relationship first.");}}else{g=new a(this,f,e,d);this._addBinding(g);}return g;},_addBinding:function(c){this._bindings.push(c);},_indexOfListener:function(c){var d=this._bindings.length;while(d--){if(this._bindings[d]._listener===c){return d;}}return -1;},add:function(d,c){return this._registerListener(d,false,c);},addOnce:function(d,c){return this._registerListener(d,true,c);},_removeByIndex:function(c){this._bindings[c]._destroy();this._bindings.splice(c,1);},remove:function(d){if(typeof d!=="function"){throw new Error("listener is a required param of remove().");}var c=this._indexOfListener(d);if(c!==-1){this._removeByIndex(c);}return d;},removeAll:function(){var c=this._bindings.length;while(c--){this._removeByIndex(c);}},getNumListeners:function(){return this._bindings.length;},disable:function(){this._isEnabled=false;},enable:function(){this._isEnabled=true;},isEnabled:function(){return this._isEnabled;},halt:function(){this._shouldPropagate=false;},dispatch:function(e){if(!this._isEnabled){return;}var c=Array.prototype.slice.call(arguments),g=this._bindings.slice(),d,f=this._bindings.length;this._shouldPropagate=true;for(d=0;d<f;d++){if(g[d].execute(c)===false||!this._shouldPropagate){break;}}},dispose:function(){this.removeAll();delete this._bindings;},toString:function(){return"[Signal isEnabled: "+this._isEnabled+" numListeners: "+this.getNumListeners()+"]";}};return{Signal:b,VERSION:"0.5.1"};}());var xv_signals={searchItemSelected:new signals.Signal,nodeFocused:new signals.Signal,documentProcessed:new signals.Signal,dndModeEntered:new signals.Signal,dndModeQuit:new signals.Signal,dndMessageChanged:new signals.Signal};var xv_utils=(function(){var a=/^[\w\-\:]+$/;return{trim:function(b){return(b||"").replace(/^(\s|\u00A0)+|(\s|\u00A0)+$/g,"");},createXPath:function(d,c){var e=[];function b(i){var g=i;var f=i.nodeName;var h=1;while(i=i.previousSibling){if(i.nodeType==1&&i.nodeName==f){h++;}}e.unshift(f+"["+h+"]");if(g.parentNode&&g.parentNode!=c&&g.ownerDocument!=g.parentNode){b(g.parentNode);}}b(d);return(!c?"/":"")+e.join("/");},isXPath:function(b){return !a.test(b);},unescapeHTML:function(c){var b={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};c=this.trim(c);return c.replace(/&(lt|gt|amp|apos|quot);/g,function(d){return b[d];});},escapeHTML:function(c){var b={"<":"&lt;",">":"&gt;","&":"&amp;"};return c.replace(/[<>&]/g,function(d){return b[d]||d;});},toXml:function(d){var b=(new DOMParser()).parseFromString(d,"text/xml");if(!b||!b.documentElement||b.documentElement.nodeName=="parsererror"||b.getElementsByTagName("parsererror").length){var c=b.getElementsByTagName("parsererror")[0];console.log(c);throw"<h2>Canâ€™t parse XML document</h2> \n"+(c?c.textContent:"");}return b;},filterValidAttributes:function(b){return _.filter(b.attributes,function(c){return c.name.indexOf("data-xv-")!=0;});}};})();var xv_dom={xhtml_ns:"http://www.w3.org/1999/xhtml",_html_context:null,setHTMLContext:function(a){this._html_context=a;},trim:function(a){return(a||"").replace(/^(\s|\u00A0)+|(\s|\u00A0)+$/g,"");},getClassName:function(a){if("className" in a){return a.className;}else{if(a.getAttribute){return a.getAttribute("class")||"";}}return"";},setClassName:function(a,b){if("className" in a){a.className=b;}else{a.setAttribute("class",b);}},hasClass:function(b,c){c=" "+c+" ";var a=this.getClassName(b);return a&&(" "+a+" ").indexOf(c)>=0;},toggleClass:function(b,c,a){if(typeof a=="undefined"){a=this.hasClass(b,c);}if(a){this.removeClass(b,c);}else{this.addClass(b,c);}},addClass:function(e,g){var d=[];var b=g.split(/\s+/g);for(var c=0,a=b.length;c<a;c++){if(b[c]&&!this.hasClass(e,b[c])){d.push(b[c]);}}var f=this.getClassName(e);if(d.length){f+=(f?" ":"")+d.join(" ");}this.setClassName(e,this.trim(f));},removeClass:function(e,f){var d=this.getClassName(e)||"";var b=f.split(/\s+/g);
for(var c=0,a=b.length;c<a;c++){d=d.replace(new RegExp("\\b"+b[c]+"\\b"),"");}this.setClassName(e,this.trim(d));},getByClass:function(b,a){return(a||document).getElementsByClassName(b);},getOneByClass:function(c,a){var b=this.getByClass(c,a);return b?b[0]:null;},getBySelector:function(a,b){return(b||document).querySelectorAll(a);},removeElement:function(a){if(a&&a.parentNode){a.parentNode.removeChild(a);}},addEvent:function(e,d,c){var a=d.split(/\s+/);for(var b=0;b<a.length;b++){e.addEventListener(a[b],c,false);}},removeEvent:function(e,d,c){var a=d.split(/\s+/);for(var b=0;b<a.length;b++){e.removeEventListener(a[b],c,false);}},toCamelCase:function(a){return a.replace(/\-(\w)/g,function(c,b){return b.toUpperCase();});},setCSS:function(e,h){if(!e){return;}var d=[],a={"line-height":1,"z-index":1,"opacity":1};for(var g in h){if(h.hasOwnProperty(g)){var b=g.replace(/([A-Z])/g,"-$1").toLowerCase(),f=h[g];d.push(b+":"+((typeof(f)=="number"&&!(b in a))?f+"px":f));}}if(e.style){e.style.cssText+=";"+d.join(";");}else{var c=e.getAttribute("style")||"";c+=(c?";":"")+d.join(";");e.setAttribute(c);}},getCSS:function(c,a){var g,k={},b,e,d=a instanceof Array;var j=d?a:[a];for(var f=0,h=j.length;f<h;f++){b=j[f];e=this.toCamelCase(b);if(c.style[e]){k[b]=k[e]=c.style[e];}else{if(!g){g=window.getComputedStyle(c,"");}k[b]=k[e]=g&&g.getPropertyValue(b);}}return d?k:k[this.toCamelCase(a)];},fromHTML:function(b){var a=this._html_context||document,g=a.createElement("div"),d=document.createDocumentFragment();if("innerHTML" in g){g.innerHTML=b;while(g.firstChild){if(g.firstChild.ownerDocument==document){d.appendChild(g.firstChild);}else{d.appendChild(document.adoptNode(g.firstChild));}}}else{var e=xv_utils.toXml("<d>"+b+"</d>"),c=e.documentElement;while(c.firstChild){d.appendChild(document.adoptNode(c.firstChild));}}if(!d.hasChildNodes()){return null;}return d.childNodes.length==1?d.firstChild:d;},empty:function(a){while(a&&a.firstChild){a.removeChild(a.firstChild);}return a;},onDomReady:function(a){this.addEvent(document,"DOMContentLoaded",a);},bubbleSearch:function(d,e){var c=e.split(",");do{if(d){for(var b=0,a=c.length;b<a;b++){if(this.hasClass(d,c[b])){return d;}}}}while(d&&(d=d.parentNode));return null;},setText:function(a,b){this.empty(a);a.appendChild(document.createTextNode(b));}};var xv_settings=(function(){var b={},c=a();function a(){try{return"localStorage" in window&&window["localStorage"]!==null;}catch(d){return false;}}return{getValue:function(e,d){var f;if(c){f=localStorage.getItem(e);}else{f=b[e];}if(_.isNull(f)||_.isUndefined(f)){f=d;}switch(typeof d){case"number":return parseFloat(f);case"boolean":if(typeof f=="string"&&f.toLowerCase()=="false"){f=false;}return !!f;default:return f;}},setValue:function(d,e){if(c){localStorage.setItem(d,e);}else{b[d]=e;}},reset:function(){if(c){localStorage.clear();}else{b={};}},dump:function(){return _.clone(c?localStorage:b);}};})();var xv_renderer=(function(){var j=0,a={},h=100;function c(n){if("__xv_id" in n){return n.__xv_id;}if("getAttribute" in n){return n.getAttribute("data-xv-id");}return null;}function i(n){var o=c(n);if(o===null||typeof o=="undefined"){o=j++;n.__xv_id=o;a[o]=n;}return o;}function e(q,r){if(q){switch(q.nodeType){case 1:return k(q,r);case 3:return b(q,r);case 4:return f(q,r);case 7:return l(q,r);case 8:return m(q,r);case 9:var n=[];for(var p=0,o=q.childNodes.length;p<o;p++){n.push(e(q.childNodes[p],r));}return n.join("");default:if(window.console){console.log("processing unknown type:",q.nodeType);}}}return"";}function g(n){var o=n.childNodes;return n.childNodes.length&&(o.length>1||n.firstChild.nodeType!=3);}function k(s,t){var q=_.map(xv_utils.filterValidAttributes(s),function(u){return'<span class="xv-attr"><span class="xv-attr-name">'+u.name+"</span>"+'="'+'<span class="xv-attr-value">'+d(u.value)+"</span>"+'"</span>';});var p=s.childNodes.length==1&&s.firstChild.nodeType==3&&s.firstChild.nodeValue.length<h;var o=[],r="",n=false;if(p||!s.childNodes.length){r+=" xv-one-line";}if(!t&&g(s)){n=true;r+=" xv-collapsed xv-has-unprocessed";}o.push('<span class="xv-node xv-tag'+r+'" data-xv-id="'+i(s)+'">');o.push('<span class="xv-tag-switcher"></span>');o.push('<span class="xv-tag-open">&lt;');o.push('<span class="xv-tag-name">'+s.nodeName+"</span>");if(q.length){o.push(" "+q.join(" "));}if(!s.childNodes.length){o.push(" /&gt;</span></span>");}else{o.push("&gt;</span>");o.push('<span class="xv-tag-children">');if(!n||p){_.each(s.childNodes,function(u){o.push(e(u,t-1));});}o.push("</span>");o.push('<span class="xv-tag-close">&lt;/'+'<span class="xv-tag-name">'+s.nodeName+"</span>"+"&gt;</span></span>");}return o.join("");}function d(n){return xv_utils.escapeHTML(xv_utils.trim(n));}function b(o){var n=xv_utils.trim(o.nodeValue);return n?'<span class="xv-text" data-xv-id="'+i(o)+'">'+d(o.nodeValue)+"</span>":"";}function l(n){return'<span class="xv-node xv-pi" data-xv-id="'+i(n)+'">&lt;?<span class="xv-pi-name">'+n.nodeName+"</span> "+'<span class="xv-pi-value">'+d(n.nodeValue)+"</span>?&gt;</span>";
}function m(o){var n=xv_utils.trim(o.nodeValue),p="xv-node xv-comment";if(n.length<h){p+=" xv-one-line";}return'<span class="'+p+'" data-xv-id="'+i(o)+'">'+'<span class="xv-tag-switcher"></span>'+'<span class="xv-comment-start">&lt;!-- </span>'+'<span class="xv-comment-value">'+d(n)+"</span>"+'<span class="xv-comment-end"> --&gt;</span>'+"</span>";}function f(o){var n=xv_utils.trim(o.nodeValue),p="xv-node xv-cdata";if(n.length<h){p+=" xv-one-line";}return'<span class="'+p+'" data-xv-id="'+i(o)+'">'+'<span class="xv-tag-switcher"></span>'+'<span class="xv-cdata-start">&lt;![CDATA[</span>'+'<span class="xv-cdata-value">'+d(n)+"</span>"+'<span class="xv-cdata-end"> ]]&gt;</span>'+"</span>";}return{render:function(n,o){if(typeof o=="undefined"){o=-1;}if(!n){return document.createDocumentFragment();}return xv_dom.fromHTML(e(n,o));},isRendered:function(n){return !!c(n);},getOriginalNode:function(n){if(typeof n!="string"&&"nodeType" in n){n=n.getAttribute("data-xv-id");}return a[n];},getId:i};})();var xv_search=(function(){var l=[],i,m,g=200,b={};function j(n){b={};_.each(n.getElementsByTagName("*"),function(o){_.each(o.attributes,function(p){if(h(p.nodeName,"xmlns")){b[p.nodeName.substring(p.nodeName.indexOf(":")+1)]=p.nodeValue;}});});}function c(n){return b[n]||null;}function h(o,n){return o.substr(0,n.length)==n;}function e(p){var n=p.nodeName,o=xv_utils.filterValidAttributes(p);if(o.length){n+=" "+o.join(" ");}return{str:n.toLowerCase(),node:p};}function f(n){if(n.nodeType!=1){return;}l.push(e(n));_.each(n.childNodes,f);}function k(o){var n=[];if(o){_.each(l,function(q){var p=q.str.indexOf(o);if(p!=-1){n.push({ix:p,node:q.node});if(n.length>=g){return false;}}});}return n.length?n:null;}function a(r){var o=[],p=0;try{var q=i.evaluate(r,i,c,XPathResult.ANY_TYPE,null);switch(q.resultType){case XPathResult.NUMBER_TYPE:o.push({xpath_type:q.resultType,value:q.numberValue});break;case XPathResult.STRING_TYPE:o.push({xpath_type:q.resultType,value:q.stringValue});break;case XPathResult.BOOLEAN_TYPE:o.push({xpath_type:q.resultType,value:q.booleanValue});break;case XPathResult.UNORDERED_NODE_ITERATOR_TYPE:var t=q.iterateNext();while(t&&p<g){o.push({node:t});t=q.iterateNext();p++;}break;}}catch(s){}return o.length?o:null;}function d(q,s){var p=q.node,o=p.nodeName,r=s.length,n=p.getAttribute("data-xv-xpath");if(!n){n=xv_utils.createXPath(p);p.setAttribute("data-xv-xpath",n);}q.label=o;q.query_start=-1;q.query_end=-1;q.xpath=n;if("ix" in q){if(q.ix<o.length){q.query_start=q.ix;q.query_end=q.ix+r;}else{_.detect(p.attributes,function(u){var t=u.name.indexOf(s);if(t!=-1){q.label+="[@"+u.name+"]";q.query_start=o.length+t+2;q.query_end=q.query_start+r;return true;}});}}return q;}xv_signals.documentProcessed.add(function(n,o){l.length=0;j(o);if(o.nodeType==9){f(o.documentElement);i=o;}else{f(o);i=o.ownerDocument;}});return{search:function(n){n=xv_utils.trim(n).toLowerCase();try{m=xv_utils.isXPath(n)?a(n):k(n);if(m&&!(m.length==1&&"xpath_type" in m[0])){m=_.map(m,function(p){return d(p,n);});}}catch(o){m=null;}return{query:n,results:m};},applyProposal:function(n){xv_signals.nodeFocused.dispatch(m[n].node,"search");}};})();(function(){var h=[],z,y,o,a,c=-1,v=false,b,x,q,w=false;function n(){return xv_dom.getByClass("xv-search-result-item",a);}function j(){return xv_settings.getValue("search.max_visible",20);}function g(C,A){var G=n(),D;C=Math.min(G.length-1,Math.max(0,C));_.each(G,function(K,J){xv_dom.removeClass(K,"xv-search-result-item-selected");if(J==C){D=K;xv_dom.addClass(K,"xv-search-result-item-selected");}});if(!A&&D){var E=D.parentNode;var B=D.offsetTop,F=D.offsetHeight,H=E.scrollTop,I=E.offsetHeight;if(B<H){E.scrollTop=B;}else{if(B+F>H+I){E.scrollTop=B+F-I;}}}c=C;xv_signals.searchItemSelected.dispatch(D,c);}function t(){if(q){clearTimeout(q);}w=true;setTimeout(function(){w=false;},100);}function f(B){var A=B.label;if(B.query_start!=-1){A=B.label.substring(0,B.query_start)+"<em>"+B.label.substring(B.query_start,B.query_end)+"</em>"+B.label.substring(B.query_end);}return A+' <span class="xv-search-result-xpath">'+B.xpath+"</span>";}function r(D,C){c=-1;if(D.results.length==1&&"xpath_type" in D.results[0]){x.innerHTML=D.results[0].value;i();p();}else{var A=_.map(D.results,function(F,E){return'<li class="xv-search-result-item" data-xv-search-ix="'+E+'">'+f(F)+"</li>";});var B=xv_dom.getOneByClass("xv-search-result-content");xv_dom.empty(B);B.appendChild(xv_dom.fromHTML(A.join("")));m();s();if(D.results.length>j()){xv_dom.addClass(a,"xv-search-result-overflow");xv_dom.setCSS(B,{"height":n()[0].offsetHeight*j()});}else{xv_dom.removeClass(a,"xv-search-result-overflow");xv_dom.setCSS(B,{"height":"auto"});}}}function p(){xv_dom.addClass(a,"xv-search-result-hidden");v=false;}function m(){xv_dom.removeClass(a,"xv-search-result-hidden");v=true;}function s(){xv_dom.addClass(x,"xv-search-result-hidden");}function i(){xv_dom.removeClass(x,"xv-search-result-hidden");}function l(){var A=xv_utils.trim(b.value).toLowerCase();if(!A){s();p();
return;}if(A==o&&v){return;}o=A;y=xv_search.search(A);if(y.results){r(y);}else{s();p();}}function k(A){xv_search.applyProposal(A);p();}var u=_.debounce(l,400);function d(A){if(v){switch(A.keyCode){case 38:g(c-1);t();A.preventDefault();return;case 40:g(c+1);t();A.preventDefault();return;case 13:k(c);A.preventDefault();return;case 27:p();A.preventDefault();return;}}u();}function e(D,B){var C=xv_dom.bubbleSearch(D,"xv-search-result-item");if(C){var A=_.indexOf(n(),C);if(A!=-1){B(A);}}}xv_signals.documentProcessed.addOnce(function(){a=xv_dom.fromHTML('<div class="xv-search-result"><ul class="xv-search-result-content"></ul></div>');p();var B=xv_dom.getOneByClass("xv-search-panel");B.appendChild(a);b=xv_dom.getOneByClass("xv-search-field",B);x=xv_dom.getOneByClass("xv-search-xpath-result",B);s();xv_dom.addEvent(b,"keydown",d);xv_dom.addEvent(a,"mouseover",function(C){if(w){return;}e(C.target,function(D){g(D,true);});});xv_dom.addEvent(a,"click",function(C){e(C.target,function(D){k(D);s();p();});});var A=false;xv_dom.addEvent(b,"blur",function(){setTimeout(function(){if(!A){p();}A=false;},200);});xv_dom.addEvent(b,"focus",l);xv_dom.addEvent(b,"search",l);xv_dom.addEvent(a,"mousedown",function(C){C.preventDefault();C.stopPropagation();A=true;return false;});xv_dom.addEvent(document,"mousedown",p);});})();(function(){var C,t=false,m=false,j,x=new Image,f=/mac\s+os/i.test(navigator.userAgent),w=0,q=0,B=0,a=true,F,c;var p=1,b=2,e=4,d=8;if(f){q=p;w=91;}else{q=d;w=17;}function y(I){var H=0;H|=I.metaKey&&p;H|=I.altKey&&b;H|=I.shiftKey&&e;H|=I.ctrlKey&&d;return H;}function i(H){var I=H.keyCode;return I==16||I==17||I==18||I==91;}function G(){return xv_settings.getValue("dnd.xpath_quote","'");}function A(J,I){var H={'"':"&quot;","'":"&apos;"};return J.replace(new RegExp(I,"g"),H[I]);}function v(){if(j&&x.src){j.setDragImage(x,6,x.height);}}function u(H){x.src=H;v();}function E(H){switch(y(H)){case q|b:return 1;case q|e:return 2;case q|e|b:return 3;}return 0;}function n(H){var J=G();if(!a){B=E(H);}B%=3;switch(B){case 0:return F.nodeName;case 1:var I=_.map(xv_utils.filterValidAttributes(F),function(K){return"@"+K.name;});return F.nodeName+(I.length?"["+I.join(" and ")+"]":"");case 2:case 3:var I=_.map(xv_utils.filterValidAttributes(F),function(K){return"@"+K.name+" = "+J+A(K.value,J)+J;});return F.nodeName+(I.length?"["+I.join(" and ")+"]":"");}return null;}function g(H){var J=C.textContent,L=G(),K="";if(!a){B=E(H);}B%=4;var I=function(){var M=_.detect(xv_utils.filterValidAttributes(F),function(N){return N.name==J;});return M?M.value:null;};switch(B){case 0:return"@"+J;case 1:return"@"+J+" = "+L+I()+L;case 2:return F.nodeName+"[@"+J+"]";case 3:return F.nodeName+"[@"+J+" = "+L+A(I(),L)+L+"]";}return null;}function k(H){var J=null,I=C||H.target;if(xv_dom.hasClass(I,"xv-tag-name")){J=n(H);}else{if(xv_dom.hasClass(I,"xv-attr-name")){J=g(H);}}xv_signals.dndMessageChanged.dispatch(J);if(J!==null){xv_dnd_feedback.draw(J,u);if(t){j.setData("text/plain",J);v();}else{xv_dom.removeClass(c,"xv-dnd-tooltip-hidden");xv_dom.setText(c,J);}}else{xv_dom.addClass(c,"xv-dnd-tooltip-hidden");}}function z(H){k(H);C.parentNode.insertBefore(c,C);}function D(){xv_dom.removeElement(c);}function l(H){return xv_dom.hasClass(H,"xv-tag-name")||xv_dom.hasClass(H,"xv-attr-name");}function h(H){H.draggable=true;H.setAttribute("draggable","true");}function r(H){H.draggable=false;H.setAttribute("draggable","false");}function o(H){if(C){h(C);}if(!m){m=true;xv_signals.dndModeEntered.dispatch(C,H);}B=0;}function s(){if(C){r(C);}t=false;if(m){m=false;xv_signals.dndModeQuit.dispatch();}B=0;}x.onload=v;xv_signals.dndModeEntered.add(function(I,H){z(H);});xv_signals.dndModeQuit.add(function(H){D();});xv_signals.documentProcessed.addOnce(function(){c=xv_dom.fromHTML('<span class="xv-dnd-tooltip"></span>');a=xv_settings.getValue("dnd.cycle_mode",true);var H="xv-tag-name,xv-attr-name";xv_dom.addEvent(document,"mouseover",function(I){if(l(I.target)){C=I.target;F=xv_renderer.getOriginalNode(xv_dom.bubbleSearch(C,"xv-node"));if(f?I.metaKey:I.ctrlKey){o(I);}}});xv_dom.addEvent(document,"mouseout",function(I){if(l(I.target)){s();C=null;}});xv_dom.addEvent(document,"dragstart",function(I){t=true;j=I.dataTransfer;j.effectAllowed="copy";k(I);D();});xv_dom.addEvent(document,"dragend",function(I){s();});xv_dom.addEvent(document,"keydown",function(I){if(I.keyCode==w&&C){o(I);}if(C){if(!a&&i(I)){k(I);}else{if(a&&I.keyCode==16){B++;k(I);}}}});xv_dom.addEvent(document,"keyup",function(I){if(I.keyCode==w&&C){s();}if(!a&&i(I)&&C){k(I);}});});})();var xv_outline=(function(){function a(h){return xv_utils.escapeHTML(xv_utils.trim(h));}function e(h){var i=h.childNodes;return h.childNodes.length&&(i.length>1||h.firstChild.nodeType!=3);}function d(h,i){if(h){switch(h.nodeType){case 1:return g(h,i);case 4:return f(h,i);case 7:return b(h,i);case 8:return c(h,i);case 9:return _.map(h.childNodes,function(j){return d(j,i);}).join("");}}return"";}function g(m,n){var j=_.map(xv_utils.filterValidAttributes(m),function(o){return o.name+": "+a(o.value);
});var i=[],l="",h=false;var k=!!_.detect(m.childNodes,function(p){var o=p.nodeType;return o==1||o==7||o==8;});if(!k){l+=" xv-outline-node-empty";}if(!n&&e(m)){h=true;l+=" xv-collapsed xv-has-unprocessed";}i.push('<span class="xv-node xv-outline-node xv-outline-tag'+l+'" data-xv-id="'+xv_renderer.getId(m)+'">');i.push('<span class="xv-tag-switcher"></span>');i.push('<span class="xv-outline-node-inner">');i.push('<span class="xv-outline-tag-name">'+m.nodeName+"</span>");if(j&&j.length){i.push(" "+j.join(", "));}i.push("</span>");if(m.childNodes.length){i.push('<span class="xv-outline-tag-children">');if(!h){_.each(m.childNodes,function(o){i.push(d(o,n-1));});}i.push("</span>");}i.push("</span>");return i.join("");}function b(h){return'<span class="xv-node xv-outline-node xv-outline-pi" data-xv-id="'+xv_renderer.getId(h)+'">'+'<span class="xv-outline-node-inner">'+'<span class="xv-outline-pi-name">'+h.nodeName+"</span>"+"</span>"+"</span>";}function c(i){var h=_.detect(a(i.nodeValue||"").split(/\r?\n/),function(j){return !!j;})||"";if(h.length>50){h=h.substring(0,50)+"...";}return'<span class="xv-node xv-outline-node xv-outline-comment" '+'data-xv-id="'+xv_renderer.getId(i)+'">'+'<span class="xv-outline-node-inner">'+h+"</span>"+"</span>";}function f(i){var h=_.detect(a(i.nodeValue||"").split(/\r?\n/),function(j){return !!j;})||"";if(h.length>50){h=h.substring(0,50)+"...";}return'<span class="xv-node xv-outline-node xv-outline-cdata" '+'data-xv-id="'+xv_renderer.getId(i)+'">'+'<span class="xv-outline-node-inner">'+'<span class="xv-outline-cdata-name">CDATA</span> '+h+"</span>"+"</span>";}return{render:function(h,i){if(typeof i=="undefined"){i=-1;}if(!h){return document.createDocumentFragment();}return xv_dom.fromHTML(d(h,i));}};})();(function(){var o,s,p,m,q={},d,t=0,r,l=false;function u(v){v=Math.round(Math.max(120,Math.min(window.innerWidth*0.5,v)));t=v;xv_settings.setValue("outline.width",v);if(o.style){xv_dom.setCSS(o,{width:v});xv_dom.setCSS(s,{right:v});}else{if(!r){r=a();}if(r){if(l){r.removeRule(0);r.removeRule(0);}r.insertRule("div[class~=xv-source-pane]{right:"+v+"px !important}");r.insertRule("div[class~=xv-outline]{width:"+v+"px !important}");l=true;}}}function n(w,v){if(d&&d!=w){xv_dom.removeClass(d,"xv-outline-node-selected");}d=w;xv_dom.toggleClass(d,"xv-outline-node-selected");if(!v){xv_signals.nodeFocused.dispatch(xv_renderer.getOriginalNode(d),"outline");}}function a(){var v=_.detect(document.childNodes,function(w){return"sheet" in w;});return v?v.sheet:null;}function f(){if(m){var x=false,w,v;xv_dom.addEvent(m,"mousedown",function(y){x=true;w=y.pageX;v=o.offsetWidth;y.preventDefault();});xv_dom.addEvent(document,"mouseup",function(y){x=false;});xv_dom.addEvent(document,"mousemove",function(y){if(x){var z=y.pageX-w;u(v-z);}});}}function k(v){return xv_dom.hasClass(v,"xv-has-unprocessed");}function j(x,w){if(!xv_dom.hasClass(x,"xv-collapsed")){return;}xv_dom.removeClass(x,"xv-collapsed");if(k(x)){var v=xv_renderer.getOriginalNode(x),z=_.detect(x.childNodes,function(A){return A.nodeType==1&&xv_dom.hasClass(A,"xv-outline-tag-children");});var y=document.createDocumentFragment();_.each(v.childNodes,function(B){var A=xv_outline.render(B,0);if(A){y.appendChild(A);}});xv_dom.empty(z);z.appendChild(y);xv_dom.removeClass(x,"xv-has-unprocessed");}if(w){_.each(xv_dom.getByClass("xv-collapsed",x),function(A){j(A,w);});}}function b(w,v){if(xv_dom.hasClass(w,"xv-collapsed")){return;}xv_dom.addClass(w,"xv-collapsed");if(v){_.each(xv_dom.getByClass("xv-node",w),function(x){if(!xv_dom.hasClass(x,"xv-collapsed")&&!xv_dom.hasClass(x,"xv-one-line")){b(x);}});}}function e(v){var w=xv_renderer.getId(v);if(!(w in q)){_.detect(xv_dom.getByClass("xv-node",o),function(x){if(xv_renderer.getId(x)==w){q[w]=x;return true;}});}return q[w];}function c(){return xv_dom.hasClass(o,"xv-outline-collapsed");}function i(){xv_dom.addClass(o,"xv-outline-collapsed");o.style.width="";xv_dom.setCSS(s,{right:o.offsetWidth});xv_settings.setValue("outline.collapsed",true);}function h(){xv_dom.removeClass(o,"xv-outline-collapsed");u(t||o.offsetWidth);xv_settings.setValue("outline.collapsed",false);}function g(v){if(v){v.stopPropagation();}if(c()){h();}else{i();}}xv_signals.nodeFocused.add(function(w,x){if(x!="outline"){var v=[],z=w;do{if(z.nodeType==1){v.push(z);}}while(z=z.parentNode);v.reverse();_.each(v,function(A){j(e(A));});var y=e(w);n(y,true);if("scrollIntoViewIfNeeded" in y){y.scrollIntoViewIfNeeded();}else{y.scrollIntoView();}}});xv_signals.documentProcessed.addOnce(function(){s=xv_dom.getOneByClass("xv-source-pane");if(!o){o=xv_dom.fromHTML('<div class="xv-outline">'+'<div class="xv-outline-wrap">'+'<h2 class="xv-outline-header">Outline</h2>'+'<span class="xv-outline-close">Ã—</span>'+'<div class="xv-outline-inner"></div>'+'<div class="xv-outline-rs-handler"></div>'+"</div></div>");s.parentNode.appendChild(o);t=xv_settings.getValue("outline.width",300);if(xv_settings.getValue("outline.collapsed",false)){i();}else{setTimeout(function(){u(t);
});}}p=xv_dom.getOneByClass("xv-outline-inner",o);m=xv_dom.getOneByClass("xv-outline-rs-handler",o);xv_dom.addEvent(xv_dom.getOneByClass("xv-outline-close",o),"click",g);xv_dom.addEvent(o,"click",function(v){if(c()){g();}});xv_dom.addEvent(o,"click",function(v){if(xv_dom.hasClass(v.target,"xv-tag-switcher")){var w=xv_dom.bubbleSearch(v.target,"xv-node");if(xv_dom.hasClass(w,"xv-collapsed")){j(w,!!v.altKey);}else{b(w,!!v.altKey);}}else{var w=xv_dom.bubbleSearch(v.target,"xv-outline-node");if(w){n(w);}}});});xv_signals.documentProcessed.add(function(v,w){if(o){xv_dom.empty(p);p.appendChild(xv_outline.render(w,xv_settings.getValue("init_depth",2)));}f();});})();var xv_controller=(function(){var e,f={},h;function d(j,i){if(e&&e!=j){xv_dom.removeClass(e,"selected");}e=j;xv_dom.toggleClass(e,"selected");if(!i){xv_signals.nodeFocused.dispatch(xv_renderer.getOriginalNode(e),"main");}}function b(i){return xv_dom.hasClass(i,"xv-has-unprocessed");}function a(k,j){if(!xv_dom.hasClass(k,"xv-collapsed")){return;}xv_dom.removeClass(k,"xv-collapsed");if(b(k)){var i=xv_renderer.getOriginalNode(k),m=_.detect(k.childNodes,function(o){return o.nodeType==1&&xv_dom.hasClass(o,"xv-tag-children");});var l=document.createDocumentFragment();_.each(i.childNodes,function(p){var o=xv_renderer.render(p,0);if(o){l.appendChild(o);}});xv_dom.empty(m);m.appendChild(l);xv_dom.removeClass(k,"xv-has-unprocessed");}if(j){_.each(xv_dom.getByClass("xv-collapsed",k),function(o){a(o,j);});}}function c(j,i){if(xv_dom.hasClass(j,"xv-collapsed")){return;}xv_dom.addClass(j,"xv-collapsed");if(i){_.each(xv_dom.getByClass("xv-node",j),function(k){if(!xv_dom.hasClass(k,"xv-collapsed")&&!xv_dom.hasClass(k,"xv-one-line")){c(k);}});}}function g(i){var j=xv_renderer.getId(i);if(!(j in f)){_.detect(xv_dom.getByClass("xv-node",h),function(k){if(xv_renderer.getId(xv_renderer.getOriginalNode(k))==j){f[j]=k;return true;}});}return f[j];}xv_signals.documentProcessed.addOnce(function(){xv_dom.addEvent(document,"click",function(i){var j=xv_dom.bubbleSearch(i.target,"xv-tag-open,xv-tag-close,xv-comment-start");if(j){j=xv_dom.bubbleSearch(j,"xv-node");if(xv_dom.hasClass(j,"xv-collapsed")){a(j,!!i.altKey);}else{d(j);}}});xv_dom.addEvent(h,"click",function(i){if(xv_dom.hasClass(i.target,"xv-tag-switcher")){var j=xv_dom.bubbleSearch(i.target,"xv-node");if(xv_dom.hasClass(j,"xv-collapsed")){a(j,!!i.altKey);}else{c(j,!!i.altKey);}}});xv_dom.addEvent(h,"dblclick",function(i){var j=xv_dom.bubbleSearch(i.target,"xv-tag-open,xv-tag-close,xv-comment-start,xv-comment-end");if(j&&!xv_dom.hasClass(j.parentNode,"xv-one-line")){c(j.parentNode);i.preventDefault();}});});xv_signals.nodeFocused.add(function(j,k){if(k!="main"&&j){var i=[],m=j;do{if(m.nodeType==1){i.push(m);}}while(m=m.parentNode);i.reverse();_.each(i,function(o){a(g(o));});var l=g(j);if("scrollIntoViewIfNeeded" in l){l.scrollIntoViewIfNeeded();}else{l.scrollIntoView();}}});return{process:function(l){if(typeof l=="string"){try{l=xv_utils.toXml(l);}catch(m){var j=xv_dom.fromHTML('<div class="xv-error">'+m.toString()+"</div>");var k=document.body||document.documentElement;k.appendChild(j);xv_dom.addClass(k,"xv-error-state");l=null;}}if(l){var i=xv_renderer.render(l,xv_settings.getValue("init_depth",2));if(!h){h=xv_dom.getOneByClass("xv-source-pane-inner");}f={};xv_dom.empty(h);h.appendChild(i);xv_signals.documentProcessed.dispatch(i,l);return i;}},expandNode:a,collapseNode:c,getRenderedNode:g};})();(function(){var a;function b(c){if(!a){a=xv_dom.fromHTML('<span class="xv-selection-notifier"></span>');}var d=a.cloneNode(true);var e=c;if(xv_dom.hasClass(c,"xv-tag")){e=_.detect(c.childNodes,function(f){return f.nodeType==1&&xv_dom.hasClass(f,"xv-tag-open");});}if(e){xv_dom.setCSS(d,{left:e.offsetLeft,top:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight});e.parentNode.insertBefore(d,e);setTimeout(function(){xv_dom.removeElement(d);},1500);}}xv_signals.documentProcessed.addOnce(function(){xv_dom.addEvent(document,"webkitAnimationEnd mozAnimationEnd",function(c){if(xv_dom.hasClass(c.target,"xv-selection-notifier")){xv_dom.removeElement(c.target);}});});xv_signals.nodeFocused.add(function(c,d){if(d!="main"&&c){var e=xv_controller.getRenderedNode(c);b(e);}});})();var xv_dnd_feedback=(function(){var b=document.createElement("canvas"),i=b.getContext("2d"),d=11,c="normal "+d+'px "Lucida Grande", sans-serif',f=6,h=4,g;var e=new Image;e.onload=function(){g=i.createPattern(e,"repeat");};e.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAbCAIAAAA70dJZAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHdJREFUeNp0j1EOwCAIQ8Fw/3t6CGW4sg7N1kQ/6qNU7b3POd1dRFpIHqlquOZFYb3vQFqcDz4i9dbiMQnKOAwwebqGMv99mJQIy+M2LBtjgFrzW6TsMpRlRMMmrmg1/ORX3tHHKp957J//r18++2/9cj8V1iXAAFG7oYASmw8VAAAAAElFTkSuQmCC";function a(m,l,o,n,k,j){m.beginPath();m.moveTo(l+j,o);m.lineTo(l+n-j,o);m.quadraticCurveTo(l+n,o,l+n,o+j);m.lineTo(l+n,o+k-j);m.quadraticCurveTo(l+n,o+k,l+n-j,o+k);m.lineTo(l+j,o+k);m.quadraticCurveTo(l,o+k,l,o+k-j);m.lineTo(l,o+j);m.quadraticCurveTo(l,o,l+j,o);
m.closePath();}b.className="xv-drag-image";b.width=b.height=1;(document.body||document.documentElement).appendChild(b);return{draw:function(o,n){i.font=c;var k=i.measureText(o),m=f*2+k.width,j=d+h*2;b.width=m+2;b.height=j+2;i.save();i.globalAlpha=0.8;i.fillStyle=g;a(i,0,0,m,j,5);i.fill();a(i,1,1,m-1,j-1,5);i.strokeStyle="#f1f1f1";i.lineWidth=2;i.stroke();a(i,0.5,0.5,m,j,5);i.strokeStyle="#bdbdbd";i.lineWidth=1;i.stroke();i.fillStyle="#000";i.textBaseline="middle";i.font=c;i.fillText(o,f,Math.round(j/2));i.restore();var l=b.toDataURL();if(n){n(l);}return l;}};})();